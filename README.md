# 100-OJ-battle-assistant
## 新平台: 原生安卓版发布

* **此版本由社区贡献者 [TimeZ250](https://github.com/TimeZ250) 完成并合并。**
* **新增**: 项目新增了一个使用 Kotlin 和 XML 开发的原生安卓 (Android) 版本。
* **平台扩展**: 项目现在正式支持桌面 (Python/Tkinter) 与移动 (Android) 双平台。
* **功能对齐**: 安卓版本旨在实现与桌面版相同的核心决策算法与策略，为移动用户提供原生应用体验。

## V1.x: 核心功能与基础策略

* **V1.0: 初始版本**
    * 创建了基于 `Tkinter` 的图形用户界面（GUI）。
    * 实现了计算【防御】和【闪避】期望伤害的核心逻辑。
    * 添加了角色下拉菜单、攻击力输入框和状态复选框。
    * 设置窗口为“总在最前”模式。

* **V1.1: HP与生存逻辑**
    * 新增“自己当前HP”输入框。
    * 增加生存风险判断：若闪避失败会导致KO而防御能够存活，则推荐防御。
    * 实现了选择角色后，自动填充其最大生命值的功能。

* **V1.2: 策略选择功能**
    * 新增【生存优先】和【期望伤害优先】的策略选项。
    * 重构决策逻辑，使其根据所选策略进行推荐。

* **V1.3: 游戏规则修正**
    * 修正了【闪避】的成功条件，从 `闪避值+骰子 >= 攻击值` 改为 `闪避值+骰子 > 攻击值`。

* **V1.4: 自定义修正**
    * 新增“临时修正”输入框，允许用户为防御和闪避输入额外的修正值。

## V2.x: 数据与交互

* **V2.0: 全角色数据与UI改版**
    * 集成了官方完整的角色数据库，替代了原有的示例数据。
    * 为“自己当前HP”输入框增加了 `-2, -1, +1, +2` 快捷按钮。
    * 为“对手最终攻击力”输入框增加了 `C, +1, +5, -1` 快捷按钮。
    * 更新了内部数据解析器以兼容官方数据格式。

* **V2.1: 交互优化**
    * 为HP和攻击力输入框增加了下沉式浮雕和背景色以提高视觉区分度。
    * 将攻击力快捷按钮 `+5` 修改为 `+3`，并调整按钮顺序为 `-1, +1, +3, C`。

## V3.x: 双语支持与核心算法修正

* **V3.0 - V3.6**:
    * **双语支持**: 新增“中文 / English”双语切换功能，并建立了UI文本的本地化系统。
    * **数据集成**: 集成了中文版角色数据库。
    * **体验优化**: 将角色选择菜单从 `OptionMenu` 替换为 `Combobox`，以支持鼠标滚轮滚动。
    * **BUG修复**: 修复了UI语言文本混杂显示的BUG。
    * **核心算法修正 (V3.6)**: 修正了“生存优先”策略的逻辑，在“防御必死但闪避有生机”的情况下，现在能正确推荐【闪避】。

## V4.x: 深度分析功能

* **V4.0 - V4.1**:
    * **功能新增**: 新增“概率深度分析”模块，用于显示【防御】和【闪避】各自的存活概率及详细的伤害分布。
    * **算法完善**: 重写“生存优先”策略，确立以“存活概率”为最高决策优先级，期望伤害仅用作平局判断。

## V5.x: “抗性”策略与终极决策

* **V5.0 - V5.5**:
    * **全新维度**: 引入了**“抗性”**概念及【抗性保留优先】策略。
    * **算法优化**: 将“KO”的惩罚从负无穷，优化为基于角色属性的“KO惩罚值”。
    * **界面说明**: 新增了永久的策略说明区域，替代了悬浮提示。
    * **终极平局规则 (V5.5)**: 建立了平局决策链——当主要指标打平时，程序会进一步比较**“存活后的期望HP”**。

## V6.x: 易用性打磨

* **V6.0 - V6.5**:
    * **功能新增**: 为角色选择框增加了大小写不敏感的**实时搜索（联想）功能**。
    * **交互修正**: 经过多次迭代，解决了搜索框的“自动清空”、“连续输入”与“下拉菜单选择”之间的交互冲突。
 
## V7.x: 界面布局与最终修正

* **V7.0**:
    * 新增界面折叠功能，允许用户隐藏或显示高级选项与分析区域。
    * 添加了【显示/隐藏详情】按钮以控制折叠状态。

* **V7.1**:
    * 修复了因缺少角色搜索函数导致的程序启动崩溃问题。
    * 优化了【抗性保留优先】策略的平局判断逻辑，增加了多级判断标准。
    * 更改了默认启动策略为【抗性保留优先】。

* **V7.2**:
    * 调整了界面布局，将【推荐行动】结果移出折叠区域，使其在折叠状态下依然可见。

* **V7.3 - V7.5**:
    * 修复了程序启动时，详情区域默认展开及按钮文字不匹配的问题。
    * 修复了滑块的“点击即达”功能与拖动功能的冲突。
    * 修复了手动输入“临时修正值”不会触发即时计算的问题。
    * 修复了最终算法中一个与“生存优先”相关的逻辑漏洞。
